<div class="login">
  <div class="form-row">
    <span class="head">Регистрация</span>
  </div>
  <form action="" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="form-row">
      <div *ngIf="error" class="error up">{{this.error}}</div>
      <input class="{{((phone?.dirty || phone?.touched) && phone?.hasError('required')) ? 'in-err' : 'input'}}"
             type="tel"
             [inputMask]="'+7 (000)-000-00-00'"
             placeholder="+7 (___) ___-__-__"
             formControlName="phone"
             name="phone"
      >
      @if (phone?.invalid && (phone?.dirty || phone?.touched)) {
        @if (phone?.hasError('required')) {
          <div class="error">Это поле обязательно</div>
        }
      }
    </div>
    <div class="form-row">
      <input
        class="{{((name?.dirty || name?.touched) && name?.hasError('required'))  ? 'in-err' : 'input'}}"
        type="text"
        placeholder="Имя"
        formControlName="name"
        name="name"
      >
      @if (name?.invalid && (name?.dirty || name?.touched)) {
        @if (name?.hasError('required')) {
          <div class="error">Это поле обязательно</div>
        }
      }
    </div>
    <div class="form-row">
      <input
        class="{{((last_name?.dirty || last_name?.touched) && last_name?.hasError('required')) ? 'in-err' : 'input'}}"
        type="text"
        placeholder="Фамилия"
        formControlName="last_name"
        name="last_name"
      >
      @if (last_name?.invalid && (last_name?.dirty || last_name?.touched)) {
        @if (last_name?.hasError('required')) {
          <div class="error">Это поле обязательно</div>
        }
      }
    </div>
    <div class="form-row">
      <input
        class="{{((password?.dirty || password?.touched) && password?.hasError('required') || password?.hasError('minLength')) ? 'in-err' : 'input'}}"
        type="password"
        placeholder="пароль"
        formControlName="password"
        name="password"
      >
      @if (password?.invalid && (password?.dirty || password?.touched)) {
        @if (password?.hasError('required')) {
          <div class="error">Это поле обязательно</div>
        }
        @if (password?.hasError('minlength')) {
          <div class="error">Минимум 6 символов</div>
        }
      }
    </div>
    <div class="form-row">
      <input
        class="{{((confirm_password?.dirty || confirm_password?.touched) && confirm_password?.hasError('required') || confirm_password?.hasError('minLength')) ? 'in-err' : 'input'}}"
        type="password"
        placeholder="повторите пароль"
        formControlName="confirm_password"
        name="password"
        (input)="matchPasswords()"
      >
      @if (confirm_password?.invalid && (confirm_password?.dirty || confirm_password?.touched)) {
        @if (confirm_password?.hasError('required')) {
          <div class="error">Это поле обязательно</div>
        }
        @if (confirm_password?.hasError('minlength')) {
          <div class="error">Минимум 6 символов</div>
        }
      }
      @if (!passwordsError) {
        <div class="error">пароли не совпадают</div>
      }
    </div>
    <div class="form-row">
      <button [disabled]="form.disabled" class="button" type="submit">Зарегистрироваться</button>
    </div>
  </form>
  <div class="form-row">
    <button type="button" routerLink="/login" class="link">Авторизоваться</button>
  </div>
</div>
